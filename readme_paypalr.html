<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PayPal Restful Payment Module for Zen Cart 1.5.7c and Later</title>
<style>
a, a:active,
a:visited {
    color: #006666;
}
a:hover {
    color:#00CC99;
}
body,
p,
h1,
h2,
h3,
h4,
li,
td {
    font-family: Verdana, AvantGarde, Tahoma, Arial, sans-serif;
    font-size: 10pt;
    color: black;
    padding: 0px;
    margin: 20px;
}
pre {
    margin: 20px;
}
h1, 
h2, 
h3, 
h4 { 
    font-weight: bold
}
h1 { 
    font-size: 20px;
}
h2 { 
    font-size: 16px;
    border-top: 1px solid black;
    padding-top: 5px;
}
ol li,
ul li { 
    margin: 5px 0;
}
.corefile,
.impt {
    color: red;
}
.added {
    color: blue;
}
img {
    margin-left: 20px;
    max-width: 95%;
}
.removed {
    text-decoration: line-through;
}
.smaller {
    font-size: smaller;
}
table {
    margin-left: 20px;
}
table, table th, table td {
    padding: 0.5rem;
    border-collapse: collapse;
    border: 1px solid black;
}
th, td {
    text-align: left;
}
table table {
    margin-top: 0.5rem;
}
.event-group {
    text-transform: uppercase;
    border-top: 1px solid black;
    padding-top: 0.5rem;
}
.text-center {
    text-align: center;
}
</style>
</head>

<body>
    <h1>PayPal RESTful Payment Module (<var>paypalr</var>) for Zen Cart 1.5.7c and later</h1>
    <h3>Version 1.3.0-alpha</h3>
    <p>Current Support Thread at Zen Cart Forums: <a href="https://www.zen-cart.com/forumdisplay.php?170-PayPal-RESTful-support" target="_blank">https://www.zen-cart.com/forumdisplay.php?170-PayPal-RESTful-support</a></p>
    <p>Zen Cart Download Link: <a href="https://www.zen-cart.com/downloads.php?do=file&id=2382" target="_blank">https://www.zen-cart.com/downloads.php?do=file&id=2382</a></p>
    <p>GitHub repository: <a href="https://github.com/lat9/paypalr" target="_blank">https://github.com/lat9/paypalr</a></p>

    <h2>Purpose</h2>
    <p>This Zen Cart payment module combines the processing for the <b>PayPal Payments Pro</b> (<var>paypaldp</var>) and <b>PayPal Express Checkout</b> (<var>paypalwpp</var>) payment modules that are currently built into the Zen Cart distribution.  Instead of using the older NVP (<b>N</b>ame <b>V</b>alue <b>P</b>air) methods to communicate with PayPal, this payment module uses PayPal's now-current <a href="https://developer.paypal.com/api/rest/" target="_blank">REST APIs</a> and combines the two legacy methods into one.</p>
    <p><b>Zen Cart compatibility.</b> This release supports Zen Cart v1.5.7c and later, provided that the following requirements are met:</p>
    <ol>
        <li>Apply the module's <a href="https://github.com/lat9/paypalr/wiki/Required-changes-to-%60-includes-classes-order_total.php%60" target="_blank"><var>order_total</var> notifier patch</a>; this is the only change that touches a core file.</li>
        <li>Use the bundled ObserverManager trait shim that the module installs automatically.</li>
        <li>Use the bundled language shim that the module installs automatically.</li>
    </ol>
    <p>Those shims provide the 1.5.8a trait and language fallbacks automatically&mdash;no additional downloads are required beyond the <var>order_total</var> patch.</p>
    <p>The module's operation has been validated &hellip;</p>
    <ol>
        <li>With PHP versions 7.4 through 8.4; <b>PHP 7.3 will result in fatal PHP errors!</b></li>
        <li>In Zen Cart's 3-page checkout environment (v1.5.7<b>c</b>+, v2.0.x and v2.1.0)</li>
        <li>With <a href="https://www.zen-cart.com/downloads.php?do=file&id=2095" target="_blank">One-Page Checkout</a> (OPC), v2.4.6-2.5.3<ol type="a">
            <li>Using <em>OPC</em>'s guest-checkout feature.</li>
            <li>Both requiring confirmation and not!</li>
        </ol></li>
        <li>With both the built-in <var>responsive_classic</var> and <a href="https://www.zen-cart.com/downloads.php?do=file&id=2191" target="_blank"><var>ZCA Bootstrap</var></a> (v3.6.2-v3.7.7) templates.</li>
    </ol>
    <p>For additional information, refer to the payment-module's <a href="https://github.com/lat9/paypalr/wiki" target="_blank">wiki articles</a>.</p>
    <p><b>Credits:</b> CSS-based spinner compliments of <a href="https://loading.io/css/" target="_blank">loading.io css spinner</a>.</p>

    <h2>Integrated sign-up (ISU)</h2>
    <p>Zen Cart's admin exposes a <b>Complete PayPal setup</b> button that now opens the Numinix onboarding portal. The bridge collects your storefront metadata, generates a tracking reference and redirects administrators to <a href="https://www.numinix.com/" target="_blank">numinix.com</a> where the secure PayPal onboarding flow runs. After onboarding, the portal returns the administrator to the Payment Modules page so the newly issued credentials can be copied into the configuration fields.</p>

    <h3>Prerequisites</h3>
    <ul>
        <li>Install the module and apply the required <code>order_total</code> notifier patch.</li>
        <li>Populate Zen Cart's core configuration values for store name, owner name and owner email address so ISU can share them with PayPal.</li>
        <li>Ensure the store can reach the onboarding portal over HTTPS (outbound internet access required).</li>
    </ul>

    <h3>Sandbox versus live</h3>
    <p>The module chooses the sandbox or live onboarding flow based on the <b>PayPal Server</b> setting (<code>MODULE_PAYMENT_PAYPALR_SERVER</code>). Sandbox lets you rehearse onboarding, while live uses the production PayPal environment managed by Numinix. When onboarding completes, copy the credentials from the portal into this module's configuration.</p>

    <h3>Partner attribution and redirects</h3>
    <p>The bridge injects the partner attribution header automatically and includes the Payment Modules URL as <code>redirect_url</code>. When the portal finishes, it calls <code>admin/paypalr_integrated_signup.php?action=return</code>, which adds a success message before redirecting back to the module. If the onboarding window is closed early, <code>action=cancel</code> informs the administrator that the process did not finish.</p>

    <h2>Partner credential packaging guidance</h2>
    <p>Partner credentials should never be stored in your repository or included in a distribution archive. Keep secrets in <code>includes/local/paypal_partner_credentials.php</code> (which remains outside of the packaged plugin) or supply them through environment variables for staging and production deployments. The helper checks the local configuration first and then the environment, allowing you to ship the module without exposing API keys.</p>

    <h2>Charging vaulted cards from custom code</h2>
    <p>When the checkout flow completes a card payment, PayPal returns a <code>payment_source.card</code> payload that contains the vault token. The module saves that response via <code>PayPalRestful\Common\VaultManager::saveVaultedCard</code> and broadcasts the <code>NOTIFY_PAYPALR_VAULT_CARD_SAVED</code> notifier so observers can act on newly stored or updated instruments.</p>
    <p>Custom code can reuse those vaulted instruments to bill recurring subscriptions or other merchant-initiated payments without prompting customers for their card details again:</p>
    <ol>
        <li>Load the module's autoloader before referencing any of its classes:
            <pre><code>&lt;?php
require_once DIR_FS_CATALOG . 'includes/modules/payment/paypal/pprAutoload.php';
            </code></pre>
        </li>
        <li>Fetch the customer's vaulted records using <code>paypalr::getVaultedCardsForCustomer($customers_id, $activeOnly = true)</code> or <code>PayPalRestful\Common\VaultManager::getCustomerVaultedCards($customers_id)</code>. Each entry contains the vault identifier, status, masked digits, expiry date, billing address, and a normalized copy of the original <code>payment_source.card</code> array returned by PayPal.</li>
        <li>Instantiate <code>PayPalRestful\Api\PayPalRestfulApi</code> with the credentials from <code>paypalr::getEnvironmentInfo()</code> and create a new order that references the stored card. A minimal capture-only example looks like:
            <pre><code>&lt;?php
[$clientId, $clientSecret] = paypalr::getEnvironmentInfo();
$api = new \PayPalRestful\Api\PayPalRestfulApi(MODULE_PAYMENT_PAYPALR_SERVER, $clientId, $clientSecret);

$card = $vaultCards[0]; // Obtained in the previous step

$orderRequest = [
    'intent' =&gt; 'CAPTURE',
    'purchase_units' =&gt; [[
        'amount' =&gt; [
            'currency_code' =&gt; 'USD',
            'value' =&gt; '10.00',
        ],
    ]],
    'payment_source' =&gt; [
        'card' =&gt; [
            'vault_id' =&gt; $card['vault_id'],
            'expiry' =&gt; $card['expiry'],
            'last_digits' =&gt; $card['last_digits'],
            'billing_address' =&gt; $card['billing_address'],
            'attributes' =&gt; [
                'stored_credential' =&gt; [
                    'payment_initiator' =&gt; 'MERCHANT',
                    'payment_type' =&gt; 'RECURRING',
                    'usage' =&gt; 'SUBSEQUENT',
                ],
            ],
        ],
    ],
];

$createResponse = $api-&gt;createOrder($orderRequest);
$captureResponse = $api-&gt;captureOrder($createResponse['id']);
            </code></pre>
            <p>Adjust the purchase units, intent, and stored credential metadata to match your billing scenario. PayPal's <a href="https://developer.paypal.com/docs/multiparty/seller/checkout/facilitator/vault/" target="_blank">vault documentation</a> covers additional optional fields, such as supplying the previous network transaction reference.</p>
        </li>
        <li>Once PayPal returns the new authorization or capture, call <code>VaultManager::saveVaultedCard($customers_id, $orders_id, $payment_source['card'])</code> with the updated response so the vault record's <em>last used</em> timestamp and status stay current.</li>
    </ol>

    <h2>Installation and Upgrade</h2>
    <h3>Initial Installation</h3>
    <h4>Before you start &hellip;</h4>
    <ol>
        <li>Follow the instructions in the payment module's Wiki to <a href="https://github.com/lat9/paypalr/wiki/Creating-PayPal-Credentials" target="_blank">create the PayPal credentials</a> required to communicate with PayPal.</li>
        <li>Confirm that your store meets the compatibility requirements listed below for your Zen Cart version.</li>
    </ol>

    <h4>Running on Zen Cart &lt; 1.5.8a</h4>
    <ol>
        <li>Apply the module's <a href="https://github.com/lat9/paypalr/wiki/Required-changes-to-%60-includes-classes-order_total.php%60" target="_blank"><var>order_total</var> notifier patch</a>. This is the only compatibility change that touches a core file and, without it, the payment module will <a href="https://github.com/lat9/paypalr/wiki/Configuring-the-Payment-Module#missing-required-notifications" target="_blank">automatically disable</a> itself.</li>
    </ol>
    <p>The ObserverManager trait and language compatibility shims introduced in Zen Cart 1.5.8a are bundled with this distribution. They install automatically, so no additional downloads are needed when running on Zen Cart 1.5.7c.</p>
    <h4>Once you've completed those start-up steps &hellip;</h4>
    <ol>
        <li>Unzip this distribution's zip-file; you'll see the following files and directories:<ol>
            <li>/admin/includes/classes/observers/auto.PayPalRestAdmin.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li><span class="removed">/ppr_webhook_main.php</span> <span class="smaller">(Removed in v1.2.0)</span></li>
            <li>/includes/auto_loaders/webhook.core.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/classes/observers/auto.paypalrestful.php</li>
            <li><span class="removed">/includes/languages/english/extra_definitions/lang.paypalr_webhook_definitions.php</span> <span class="smaller">(Renamed in v1.2.0)</span></li>
            <li>/includes/languages/english/extra_definitions/lang.paypalr_redirect_listener_definitions.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/languages/english/modules/payment/lang.paypalr.php</li>
            <li>/includes/modules/payment/paypalr.php</li>
            <li>/includes/modules/payment/paypal/pprAutoload.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/jquery.paypalr.checkout.js</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/jquery.paypalr.disable.js</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/paypalr.admin.css</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/paypalr_bootstrap.css</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/paypalr.css</li>
            <li>/ppr_listener.php <span class="smaller">(Packaged at the catalog root starting in v1.3.0)</span></li>
            <li>/ppr_webhook.php <span class="smaller">(Packaged at the catalog root starting in v1.3.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/AdminMain.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/DoAuthorization.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/DoCapture.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/DoRefund.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/DoVoid.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/GetPayPalOrderTransactions.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/Formatters/MainDisplay.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Admin/Formatters/Messages.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Api/PayPalRestfulApi.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Api/Data/CountryCodes.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Common/ErrorInfo.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Common/Helpers.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Common/Logger.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Common/PayPalShippingContainers.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/american_express.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/discover.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/jcb.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/maestro.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/mastercard.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/solo.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/images/visa.png</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Token/TokenCache.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/CheckoutPaymentApprovalReversed.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/PaymentAuthorizationVoided.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/PaymentCaptureCompleted.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/PaymentCaptureDeclined.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/PaymentCapturePending.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/PaymentCaptureRefunded.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/Events/PaymentCaptureReversed.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/WebhookController.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/WebhookHandlerContract.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/WebhookObject.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Webhooks/WebhookResponder.php <span class="smaller">(Added in v1.2.0)</span></li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/Address.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/Amount.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/ConfirmPayPalPaymentChoiceRequest.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/Name.php</li>
        </ol></li>
         <li>Copy the plugin's files to your site's file-system.</li>
        <li>Log into your Zen Cart admin and navigate to <b><i>Modules :: Payment</i></b>.</li>
        <li>You'll see a <em>PayPal Checkout (RESTful)</em> entry in the list of available payment modules.  Select that module, install it and follow the <a href="https://github.com/lat9/paypalr/wiki/Configuring-the-Payment-Module" target="_blank">configuration instructions</a> in the payment module's Wiki.</li>
    </ol>
    <h3>Upgrading</h3>
    <p>Simply copy the updated files to your site's file-system and navigate to your admin's <b><i>Modules :: Payment</i></b>.  The payment-module will automatically update.</p>
    <p class="smaller">Starting with v1.3.0, the <code>ppr_listener.php</code> and <code>ppr_webhook.php</code> callback endpoints are shipped in the catalog root. When upgrading from an earlier version, allow these packaged files to overwrite the copies created by the installer.</p>

    <h2>Version History</h2>
    <p>This section identifies version-specific changes to the payment module.</p>
    <ul>
        <li>v1.3.0-alpha (lat9, drbyte)<ul>
            <li>CHANGE: Package the PayPal REST callback endpoints (<code>ppr_listener.php</code> and <code>ppr_webhook.php</code>) at the catalog root instead of creating them during install.</li>
            <li>The following files were changed:<ol>
                <li>/ppr_listener.php</li>
                <li>/ppr_webhook.php</li>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/readme_paypalr.html</li>
            </ol></li>
        </ul></li>
        <li>v1.2.1, 2025-09-05 (lat9, drbyte)<ul>
            <li>BUGFIX: Can't remove module if it's disabled or credentials aren't set.</li>
            <li>BUGFIX: Root-directory files not copied on an upgrade from a previous version.</li>
            <li>The following files were changed:<ol>
                <li>/includes/modules/payment/paypalr.php</li>
            </ol></li>
        </ul></li>
        <li>v1.2.0, 2025-09-04 (lat9, drbyte) <b class="impt">Do not use, use v1.2.1 instead.</b><ul>
            <li>BUGFIX: Correct date-dependent displayed name of months with fewer than 31 days.</li>
            <li>BUGFIX: Remove duplicated constant (<var>MODULE_PAYMENT_PAYPALR_PAYER_EMAIL</var>) from the language file.</li>
            <li>CHANGE: Maintain <code>/ppr_webhook_main.php</code> based on plugin install.</li>
            <li>BUGFIX: Configuration settings changed or added for v1.1.0 weren't being applied on an initial installation.</li>
            <li>CHANGE: Callback/redirect handler renamed from <code>ppr_webhook_main.php</code> to <code>ppr_listener.php</code>.</li>
            <li>CHANGE: Add Webhook listening feature.</li>
            <li>BUGFIX: Don't include customer's IP address in hash, since it can change.</li>
            <li>BUGFIX: Prevent double-click of admin refund/capture buttons.</li>
            <li>BUGFIX: Update alert-subject language to remove &quot;Error&quot;.</li>
            <li>CHANGE: Add package-tracking via v2 orders API.</li>
            <li>The following files were changed, <span class="added">added</span> or <span class="removed">removed</span>:<ol>
                <li><span class="added">/admin/includes/classes/observers/auto.PayPalRestAdmin.php</span></li>
                <li><span class="removed">/ppr_webhook_main.php</span></li>
                <li><span class="added">/includes/auto_loaders/webhook.core.php</span></li>
                <li>/includes/classes/observers/auto.paypalrestful.php</li>
                <li>/includes/languages/english/modules/payment/lang.paypalr.php</li>
                <li><span class="added">/includes/languages/english/extra_definitions/lang.paypalr_redirect_listener_definitions.php</span></li>
                <li><span class="removed">/includes/languages/english/extra_definitions/lang.paypalr_webhook_definitions.php</span></li>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/pprAutoload.php</li>
                <li><span class="added">/includes/modules/payment/paypal/PayPalRestful/ppr_listener.php</span></li>
                <li><span class="added">/includes/modules/payment/paypal/PayPalRestful/ppr_webhook.php</span></li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/Formatters/MainDisplay.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/Formatters/Messages.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/GetPayPalOrderTransactions.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Api/PayPalRestfulApi.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Api/Data/CountryCodes.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Common/Logger.php</li>
                <li><span class="added">/includes/modules/payment/paypal/PayPalRestful/Common/PayPalShippingContainers.php</span></li>
                <li><span class="added">/includes/modules/payment/paypal/PayPalRestful/Webhooks/*.php</span></li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/ConfirmPayPalPaymentChoiceRequest.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            </ol></li>
        </ul></li>
        <li>v1.1.0, 2025-03-08 (lat9, drbyte)<ul>
            <li>CHANGE: Display card payments' AVS/CVV status in the admin.</li>
            <li>BUGFIX: Correct function signature.</li>
            <li>CHANGE: Add <code>Auth Only (Card Only)</code> transaction type.</li>
            <li>CHANGE: Add setting to enable <var>SCA_ALWAYS</var> on card payments and capture 3DS status from PayPal.</li>
            <li>The following files were changed or <span class="added">added</span>:<ol>
                <li>/ppr_webhook_main.php</li>
                <li><span class="added">/includes/languages/english/extra_definitions/lang.paypalr_webhook_definitions.php</span></li>
                <li>/includes/languages/english/modules/payment/lang.paypalr.php</li>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/Formatters/MainDisplay.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/API/PayPalRestfulApi.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            </ol></li>
        </ul></li>
        <li>v1.0.5, 2025-01-02 (lat9, brittainmark)<ul>
            <li>BUGFIX: Transmit billing address on PayPal Wallet requests.</li>
            <li>BUGFIX: Don't auto-disable in the absence of a billing-address.</li>
            <li>BUGFIX: Don't send payment request to PayPal if there are existing payment-related messages to be displayed.</li>
            <li>BUGFIX: Use language-constants for additional status-history record's information.</li>
            <li>BUGFIX: Remove intervening spaces from addresses' postal_codes.</li>
            <li>BUGFIX: Correct MySQL error when checking out with a checkbox-type attributed product.</li>
            <li>The following files were changed:<ol>
                <li>/includes/languages/english/modules/payment/lang.paypalr.php</li>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/Address.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/ConfirmPayPalPaymentChoiceRequest.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            </ol></li>
        </ul></li>
        <li>v1.0.4, 2024-08-19 (lat9, dbltoe)<ul>
            <li>BUGFIX: Use 'fit-content' for credit-card selection's icon-list.</li>
            <li>BUGFIX: Correcting admin logs when no record exists in the <samp>paypal</samp> for the selected order.</li>
            <li>BUGFIX: Use <samp>$template</samp> class to locate <code>.css</code> overrides instead of direct-directory checks.</li>
            <li>BUGFIX: Payment-module constructor was running storefront-only code in admin, resulting in unwanted logs.</li>
            <li>BUGFIX: Restore use of <samp>Logger::logJSON</samp> sanitization.</li>
            <li>The following files were changed:<ol>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/paypalr.css</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/paypalr_bootstrap.css</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/AdminMain.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/GetPayPalOrderTransactions.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Common/Logger.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            </ol></li>
        </ul></li>
        <li>v1.0.3, 2024-08-14 (lat9)<ul>
            <li>BUGFIX: Correct undefined method <samp>sendAlertMessage</samp>; should be <samp>sendAlertEmail</samp>.</li>
            <li>BUGFIX: Correct auto-disable during PayPal IPN processing.</li>
            <li>BUGFIX: Add <samp>$_SESSION['securityToken']</samp> as well as session's order-count to make GUID more unique.</li>
            <li>BUGFIX: Correct 'MISSING_REQUIRED_PARAMETER' returned when customer's first/last contains multi-byte characters.</li>
            <li>The following files were changed:<ol>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Common/Helpers.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Common/Logger.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            </ol></li>
        </ul></li>
        <li>v1.0.2, 2024-04-28 (lat9)<ul>
            <li>BUGFIX: Full cost breakdown not submitted to PayPal if an order has discounts.</li>
            <li>BUGFIX: Remove intervening spaces in level-3 data's <code>ships_from_postal_code</code>.</li>
            <li>BUGFIX: Correct PHP Warnings when performing a transaction void.</li>
            <li>BUGFIX: Add CSS spinner during webhook operation to let customers know that something's happening.</li>
            <li>BUGFIX: Indicate that card-data is collected on-site when the customer is paying via a credit-card.</li>
            <li>BUGFIX: Check PayPal response on 3DS card-payment return; orders were invalidly created when a card was declined.</li>
            <li>BUGFIX: Set error message for PayPal known error responses.</li>
            <li>BUGFIX: Additional country-codes supported by PayPal.</li>
            <li>BUGFIX: Correct method-/constant-names when a card's declined reason-code isn't understood.</li>
            <li>BUGFIX: Additional 'known' processor-response codes when a card is declined.</li>
            <li>The following files were changed:<ol>
                <li>/ppr_webhook_main.php</li>
                <li>/includes/classes/observers/auto.paypalrestful.php</li>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/jquery.paypalr.checkout.js</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/DoVoid.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Api/PayPalRestfulApi.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Api/Data/CountryCodes.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Zc2Pp/CreatePayPalOrderRequest.php</li>
            </ol></li>
        </ul></li>
        <li>v1.0.1, 2024-02-13 (lat9)<ul>
            <li>BUGFIX: Whitescreen in admin when performing transaction void.</li>
            <li>The following files were changed:<ol>
                <li>/includes/modules/payment/paypalr.php</li>
                <li>/includes/modules/payment/paypal/PayPalRestful/Admin/DoVoid.php</li>
            </ol></li>
        </ul></li>
        <li>v1.0.0, 2024-01-06 (lat9)<ul>
            <li>Initial release.</li>
        </ul></li>
    </ul>
</body>
</html>